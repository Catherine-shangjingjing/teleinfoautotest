config:
    name: 前缀注册量，解析量统计
    base_url: ${ENV(HOST)}
    verify: false
    variables: {
#        account: "${ENV(adminaccount)}",
#        password: "${ENV(adminpassword)}",
#        session: "${get_session($account, $password)}",
        currentPage: '1',
        opCode: '1',
        order: '',
        orderProp: ''
    }
#    export: [ "tableDataPrefix", "tableDataQueryNum", "lineDataQueryNum"]
teststeps:
-   name:  注册量，解析量统计
    request:
        cookies:
            SESSION: $adminSession
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Connection: keep-alive
            User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36
        method: GET
        params:
            currentPage: $currentPage
            opCode: $opCode
            order: $order
            orderProp: $orderProp
        url: /api/handleStat/handleRegAnaStat
    setup_hooks:
        - ${setup_hook_example()}
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.message
        - success
    -   eq:
        - body.status
        - 1
    -   eq:
        - body.data.tableData.content[?prefix=='$prefix'].prefix
        - [$prefix]
    -   eq:
        - body.data.tableData.content[?prefix=='$prefix'].queryNum
        - [1]
    -   eq:
        - body.data.tableData.content[?prefix=='$prefix'].createNum
        - [1]
#    -   eq:
#        - body.data.tableData.content[0].queryNum
#        - ${str_to_int($tableDataQueryNum)}
#    -   eq:
#        - body.data.lineData.queryNums[0]
#        - ${str_to_int($lineDataQueryNum)}
#    extract:
#        tableDataPrefix: "body.data.tableData.content[0].prefix"
#        tableDataQueryNum: "body.data.tableData.content[0].queryNum"
#        lineDataQueryNum: "body.data.lineData.queryNums[0]"


