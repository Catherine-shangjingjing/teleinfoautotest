config:
    name: 系统管理添加用户
    base_url: ${ENV(HOST)}
    variables: {
        account: "${ENV(adminaccount)}",
        password: "${ENV(adminpassword)}",
        session: "${get_session($account, $password)}",
        addpassword: "Admin@123"
    }
    verify: false
teststeps:
-   name: 系统管理添加用户
    request:
        cookies:
            SESSION: $session
        headers:
            Accept: application/json, text/plain, */*
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Connection: keep-alive
            Content-Length: '537'
            Content-Type: application/json;charset=UTF-8
#            Cookie: SESSION=Mzk5ZWYwZGUtMDhkZS00ZTUzLWFlODEtZTA5MTI3ZmYzZWRj
#            Host: 139.198.115.70:8000
#            Origin: http://139.198.115.70:8000
#            Referer: http://139.198.115.70:8000/snms/ui/system/general/user
            User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36
        json:
            email: "${get_email()}"
            escrowId: ''
            mobile: "${get_mobile()}"
            password: ${get_encrypt_password($addpassword)}
            realName: ''
            remarks: ''
            selectedRoles:
            - 2
            sysRoles:
            -   id: 2
            telePhone: ''
            userName: "${get_username()}"
        method: POST
        url: /api/user/add
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.message
        - success
    -   eq:
        - body.status
        - 1
    -   eq:
        - body.data
        - true
