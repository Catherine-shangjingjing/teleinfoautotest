# NOTE: Generated By HttpRunner v3.1.6
# FROM: testsuites/entapply/apply_again.yml


import sys
from pathlib import Path

sys.path.insert(0, str(Path(__file__).parent.parent.parent))


from httprunner import HttpRunner, Config, Step, RunRequest, RunTestCase

from testcases.prefixAudit.register_test import TestCaseRegister as Register

from testcases.login.login_ent_test import TestCaseLoginEnt as LoginEnt

from testcases.prefixAudit.register.upload_img_test import (
    TestCaseUploadImg as UploadImg,
)

from testcases.prefixAudit.register.upload_img_f_test import (
    TestCaseUploadImgF as UploadImgF,
)

from testcases.prefixAudit.register.upload_img_b_test import (
    TestCaseUploadImgB as UploadImgB,
)

from testcases.prefixAudit.register.submit_first_test import (
    TestCaseSubmitFirst as SubmitFirst,
)

from testcases.prefixAudit.register.apply_or_not_test import (
    TestCaseApplyOrNot as ApplyOrNot,
)

from testcases.prefixAudit.register.submit_second_test import (
    TestCaseSubmitSecond as SubmitSecond,
)

from testcases.prefixAudit.register.submit_final_test import (
    TestCaseSubmitFinal as SubmitFinal,
)

from testcases.login.login_admin_test import TestCaseLoginAdmin as LoginAdmin

from testcases.prefixAudit.audit.finance_rule_findRule_test import (
    TestCaseFinanceRuleFindrule as FinanceRuleFindrule,
)

from testcases.prefixAudit.audit.finance_rule_findRule_reg_test import (
    TestCaseFinanceRuleFindruleReg as FinanceRuleFindruleReg,
)

from testcases.prefixAudit.audit.v3_ent_audit_rejected_test import (
    TestCaseV3EntAuditRejected as V3EntAuditRejected,
)

from testcases.prefixAudit.audit.ent_prefix_manage_pageQuery_prefix_test import (
    TestCaseEntPrefixManagePagequeryPrefix as EntPrefixManagePagequeryPrefix,
)

from testcases.prefixAudit.register.apply_or_not_getid_test import (
    TestCaseApplyOrNotGetid as ApplyOrNotGetid,
)

from testcases.prefixAudit.register.update_submit_first_test import (
    TestCaseUpdateSubmitFirst as UpdateSubmitFirst,
)

from testcases.prefixAudit.audit.ent_audit_pageQuery_orgName_noaudit_test import (
    TestCaseEntAuditPagequeryOrgnameNoaudit as EntAuditPagequeryOrgnameNoaudit,
)


class TestCaseApplyAgain(HttpRunner):

    config = (
        Config("企业被驳回后重新申请")
        .variables(
            **{
                "orgName": "${get_random_param(1,10000,5)}",
                "email": "${get_email()}",
                "mobile": "${get_mobile()}",
                "account": "${ENV(adminaccount)}",
                "password": "${ENV(adminpassword)}",
                "username": "${get_username()}",
                "entaccount": "$username",
                "entpassword": "${ENV(entpassword)}",
                "prefix": "${ENV(prefix_second)}${get_random_param(1,10000000000,1)}",
                "personId": "${get_idcardno()}",
            }
        )
        .export(*["entPrefix"])
    )

    teststeps = [
        Step(RunTestCase("用户注册").call(Register)),
        Step(RunTestCase("登录-企业").call(LoginEnt).export(*["entSession"])),
        Step(RunTestCase("前缀注册企业资质图片上传").call(UploadImg).export(*["imgId"])),
        Step(RunTestCase("前缀注册企业联系人身份证图片正面上传").call(UploadImgF).export(*["imgId_f"])),
        Step(RunTestCase("前缀注册企业联系人身份证图片背面上传").call(UploadImgB).export(*["imgId_b"])),
        Step(RunTestCase("企业注册第一步提交信息").call(SubmitFirst)),
        Step(
            RunTestCase("企业注册查询注册信息")
            .call(ApplyOrNot)
            .export(
                *[
                    "legalCrtBackImgRid",
                    "entInfoSyss_1_sysType",
                    "legalCrtTypeDesc",
                    "entInfoSyss_3_deployAddrProvince",
                    "entInfoSyss_2_entApplyId",
                    "userId",
                    "entInfoSyss_2_deployAddr",
                    "entInfoSyss_3_deployAddrCounty",
                    "entInfoSyss_0_deployAddr",
                    "orgAddrProvinceDesc",
                    "entInfoSyss_3_deployAddrCity",
                    "legalCrtNo",
                    "legalName",
                    "orgAddrCity",
                    "legalCrtFrontImgRid",
                    "legalPhone",
                    "entInfoSyss_1_deployMode",
                    "entInfoSyss_2_sysType",
                    "orgCategorySpecificDesc",
                    "industrySpecific",
                    "legalCrtType",
                    "imgId_f",
                    "entId",
                    "entInfoSyss_0_entApplyId",
                    "entInfoSyss_1_deployAddrProvince",
                    "contactPhone",
                    "entInfoSyss_0_deployMode",
                    "entInfoSyss_3_deployAddr",
                    "contactName",
                    "entInfoSyss_2_deployAddrCity",
                    "userName",
                    "entApplyId",
                    "contactEmail",
                    "entInfoSyss_1_entApplyId",
                    "orgCrtCode",
                    "orgAddrCityDesc",
                    "entInfoSyss_0_deployAddrProvince",
                    "entInfoSyss_2_deployMode",
                    "entInfoSyss_2_deployAddrCounty",
                    "orgName",
                    "entInfoSyss_3_entApplyId",
                    "entInfoSyss_3_deployMode",
                    "orgNature",
                    "orgAddr",
                    "updateDate",
                    "imgId_b",
                    "contactCrtNo",
                    "entInfoSyss_1_id",
                    "applyId",
                    "entInfoSyss_0_id",
                    "orgAddrProvince",
                    "imgId",
                    "contactCrtType",
                    "orgCrtType",
                    "entInfoSyss_1_deployAddrCity",
                    "orgCrtImgRid",
                    "orgAddrCountyDesc",
                    "createDate",
                    "orgNatureDesc",
                    "entInfoSyss_3_sysType",
                    "entInfoSyss_0_sysType",
                    "orgAddrCounty",
                    "entInfoSyss_1_deployAddrCounty",
                    "entInfoSyss_2_deployAddrProvince",
                    "entUserId",
                    "entInfoSyss_0_deployAddrCounty",
                    "legalEmail",
                    "entInfoSyss_3_id",
                    "industryCategory",
                    "entInfoSyss_1_deployAddr",
                    "entInfoSyss_0_deployAddrCity",
                    "prefix",
                    "entInfoSyss_2_id",
                ]
            )
        ),
        Step(RunTestCase("企业注册第二步提交信息").call(SubmitSecond)),
        Step(
            RunTestCase("企业注册查询注册信息")
            .call(ApplyOrNot)
            .export(
                *[
                    "legalCrtBackImgRid",
                    "entInfoSyss_1_sysType",
                    "legalCrtTypeDesc",
                    "entInfoSyss_3_deployAddrProvince",
                    "entInfoSyss_2_entApplyId",
                    "userId",
                    "entInfoSyss_2_deployAddr",
                    "entInfoSyss_3_deployAddrCounty",
                    "entInfoSyss_0_deployAddr",
                    "orgAddrProvinceDesc",
                    "entInfoSyss_3_deployAddrCity",
                    "legalCrtNo",
                    "legalName",
                    "orgAddrCity",
                    "legalCrtFrontImgRid",
                    "legalPhone",
                    "entInfoSyss_1_deployMode",
                    "entInfoSyss_2_sysType",
                    "orgCategorySpecificDesc",
                    "industrySpecific",
                    "legalCrtType",
                    "imgId_f",
                    "entId",
                    "entInfoSyss_0_entApplyId",
                    "entInfoSyss_1_deployAddrProvince",
                    "contactPhone",
                    "entInfoSyss_0_deployMode",
                    "entInfoSyss_3_deployAddr",
                    "contactName",
                    "entInfoSyss_2_deployAddrCity",
                    "userName",
                    "entApplyId",
                    "contactEmail",
                    "entInfoSyss_1_entApplyId",
                    "orgCrtCode",
                    "orgAddrCityDesc",
                    "entInfoSyss_0_deployAddrProvince",
                    "entInfoSyss_2_deployMode",
                    "entInfoSyss_2_deployAddrCounty",
                    "orgName",
                    "entInfoSyss_3_entApplyId",
                    "entInfoSyss_3_deployMode",
                    "orgNature",
                    "orgAddr",
                    "updateDate",
                    "imgId_b",
                    "contactCrtNo",
                    "entInfoSyss_1_id",
                    "applyId",
                    "entInfoSyss_0_id",
                    "orgAddrProvince",
                    "imgId",
                    "contactCrtType",
                    "orgCrtType",
                    "entInfoSyss_1_deployAddrCity",
                    "orgCrtImgRid",
                    "orgAddrCountyDesc",
                    "createDate",
                    "orgNatureDesc",
                    "entInfoSyss_3_sysType",
                    "entInfoSyss_0_sysType",
                    "orgAddrCounty",
                    "entInfoSyss_1_deployAddrCounty",
                    "entInfoSyss_2_deployAddrProvince",
                    "entUserId",
                    "entInfoSyss_0_deployAddrCounty",
                    "legalEmail",
                    "entInfoSyss_3_id",
                    "industryCategory",
                    "entInfoSyss_1_deployAddr",
                    "entInfoSyss_0_deployAddrCity",
                    "prefix",
                    "entInfoSyss_2_id",
                ]
            )
        ),
        Step(RunTestCase("企业注册最终第三步提交信息").call(SubmitFinal)),
        Step(RunTestCase("登录-管理员").call(LoginAdmin).export(*["adminSession"])),
        Step(
            RunTestCase("年费费用查询").call(FinanceRuleFindrule).export(*["annualFeeRuleId"])
        ),
        Step(
            RunTestCase("注册费费用查询")
            .call(FinanceRuleFindruleReg)
            .export(*["regFeeRuleId"])
        ),
        Step(RunTestCase("审核结果保存").call(V3EntAuditRejected)),
        Step(
            RunTestCase("前缀管理分页")
            .call(EntPrefixManagePagequeryPrefix)
            .export(*["proxyState", "entPrefix", "userId", "entNameCn", "prefixId"])
        ),
        Step(RunTestCase("登录-企业").call(LoginEnt).export(*["entSession"])),
        Step(
            RunTestCase("获取申请id")
            .call(ApplyOrNotGetid)
            .export(
                *[
                    "legalCrtBackImgRid",
                    "entInfoSyss_1_sysType",
                    "legalCrtTypeDesc",
                    "entInfoSyss_3_deployAddrProvince",
                    "entInfoSyss_2_entApplyId",
                    "userId",
                    "entInfoSyss_2_deployAddr",
                    "entInfoSyss_3_deployAddrCounty",
                    "entInfoSyss_0_deployAddr",
                    "orgAddrProvinceDesc",
                    "entInfoSyss_3_deployAddrCity",
                    "legalCrtNo",
                    "legalName",
                    "orgAddrCity",
                    "legalCrtFrontImgRid",
                    "legalPhone",
                    "entInfoSyss_1_deployMode",
                    "entInfoSyss_2_sysType",
                    "orgCategorySpecificDesc",
                    "industrySpecific",
                    "legalCrtType",
                    "imgId_f",
                    "entId",
                    "entInfoSyss_0_entApplyId",
                    "entInfoSyss_1_deployAddrProvince",
                    "contactPhone",
                    "entInfoSyss_0_deployMode",
                    "entInfoSyss_3_deployAddr",
                    "contactName",
                    "entInfoSyss_2_deployAddrCity",
                    "userName",
                    "entApplyId",
                    "contactEmail",
                    "entInfoSyss_1_entApplyId",
                    "orgCrtCode",
                    "orgAddrCityDesc",
                    "entInfoSyss_0_deployAddrProvince",
                    "entInfoSyss_2_deployMode",
                    "entInfoSyss_2_deployAddrCounty",
                    "orgName",
                    "entInfoSyss_3_entApplyId",
                    "entInfoSyss_3_deployMode",
                    "orgNature",
                    "orgAddr",
                    "updateDate",
                    "imgId_b",
                    "contactCrtNo",
                    "entInfoSyss_1_id",
                    "applyId",
                    "entInfoSyss_0_id",
                    "orgAddrProvince",
                    "imgId",
                    "contactCrtType",
                    "orgCrtType",
                    "entInfoSyss_1_deployAddrCity",
                    "orgCrtImgRid",
                    "orgAddrCountyDesc",
                    "createDate",
                    "orgNatureDesc",
                    "entInfoSyss_3_sysType",
                    "entInfoSyss_0_sysType",
                    "orgAddrCounty",
                    "entInfoSyss_1_deployAddrCounty",
                    "entInfoSyss_2_deployAddrProvince",
                    "entUserId",
                    "entInfoSyss_0_deployAddrCounty",
                    "legalEmail",
                    "entInfoSyss_3_id",
                    "industryCategory",
                    "entInfoSyss_1_deployAddr",
                    "entInfoSyss_0_deployAddrCity",
                    "prefix",
                    "entInfoSyss_2_id",
                ]
            )
        ),
        Step(RunTestCase("前缀注册企业资质图片上传").call(UploadImg).export(*["imgId"])),
        Step(RunTestCase("前缀注册企业联系人身份证图片正面上传").call(UploadImgF).export(*["imgId_f"])),
        Step(RunTestCase("前缀注册企业联系人身份证图片背面上传").call(UploadImgB).export(*["imgId_b"])),
        Step(RunTestCase("企业注册第一步提交信息").call(UpdateSubmitFirst)),
        Step(
            RunTestCase("企业注册查询注册信息")
            .call(ApplyOrNot)
            .export(
                *[
                    "legalCrtBackImgRid",
                    "entInfoSyss_1_sysType",
                    "legalCrtTypeDesc",
                    "entInfoSyss_3_deployAddrProvince",
                    "entInfoSyss_2_entApplyId",
                    "userId",
                    "entInfoSyss_2_deployAddr",
                    "entInfoSyss_3_deployAddrCounty",
                    "entInfoSyss_0_deployAddr",
                    "orgAddrProvinceDesc",
                    "entInfoSyss_3_deployAddrCity",
                    "legalCrtNo",
                    "legalName",
                    "orgAddrCity",
                    "legalCrtFrontImgRid",
                    "legalPhone",
                    "entInfoSyss_1_deployMode",
                    "entInfoSyss_2_sysType",
                    "orgCategorySpecificDesc",
                    "industrySpecific",
                    "legalCrtType",
                    "imgId_f",
                    "entId",
                    "entInfoSyss_0_entApplyId",
                    "entInfoSyss_1_deployAddrProvince",
                    "contactPhone",
                    "entInfoSyss_0_deployMode",
                    "entInfoSyss_3_deployAddr",
                    "contactName",
                    "entInfoSyss_2_deployAddrCity",
                    "userName",
                    "entApplyId",
                    "contactEmail",
                    "entInfoSyss_1_entApplyId",
                    "orgCrtCode",
                    "orgAddrCityDesc",
                    "entInfoSyss_0_deployAddrProvince",
                    "entInfoSyss_2_deployMode",
                    "entInfoSyss_2_deployAddrCounty",
                    "orgName",
                    "entInfoSyss_3_entApplyId",
                    "entInfoSyss_3_deployMode",
                    "orgNature",
                    "orgAddr",
                    "updateDate",
                    "imgId_b",
                    "contactCrtNo",
                    "entInfoSyss_1_id",
                    "applyId",
                    "entInfoSyss_0_id",
                    "orgAddrProvince",
                    "imgId",
                    "contactCrtType",
                    "orgCrtType",
                    "entInfoSyss_1_deployAddrCity",
                    "orgCrtImgRid",
                    "orgAddrCountyDesc",
                    "createDate",
                    "orgNatureDesc",
                    "entInfoSyss_3_sysType",
                    "entInfoSyss_0_sysType",
                    "orgAddrCounty",
                    "entInfoSyss_1_deployAddrCounty",
                    "entInfoSyss_2_deployAddrProvince",
                    "entUserId",
                    "entInfoSyss_0_deployAddrCounty",
                    "legalEmail",
                    "entInfoSyss_3_id",
                    "industryCategory",
                    "entInfoSyss_1_deployAddr",
                    "entInfoSyss_0_deployAddrCity",
                    "prefix",
                    "entInfoSyss_2_id",
                ]
            )
        ),
        Step(RunTestCase("企业注册第二步提交信息").call(SubmitSecond)),
        Step(
            RunTestCase("企业注册查询注册信息")
            .call(ApplyOrNot)
            .export(
                *[
                    "legalCrtBackImgRid",
                    "entInfoSyss_1_sysType",
                    "legalCrtTypeDesc",
                    "entInfoSyss_3_deployAddrProvince",
                    "entInfoSyss_2_entApplyId",
                    "userId",
                    "entInfoSyss_2_deployAddr",
                    "entInfoSyss_3_deployAddrCounty",
                    "entInfoSyss_0_deployAddr",
                    "orgAddrProvinceDesc",
                    "entInfoSyss_3_deployAddrCity",
                    "legalCrtNo",
                    "legalName",
                    "orgAddrCity",
                    "legalCrtFrontImgRid",
                    "legalPhone",
                    "entInfoSyss_1_deployMode",
                    "entInfoSyss_2_sysType",
                    "orgCategorySpecificDesc",
                    "industrySpecific",
                    "legalCrtType",
                    "imgId_f",
                    "entId",
                    "entInfoSyss_0_entApplyId",
                    "entInfoSyss_1_deployAddrProvince",
                    "contactPhone",
                    "entInfoSyss_0_deployMode",
                    "entInfoSyss_3_deployAddr",
                    "contactName",
                    "entInfoSyss_2_deployAddrCity",
                    "userName",
                    "entApplyId",
                    "contactEmail",
                    "entInfoSyss_1_entApplyId",
                    "orgCrtCode",
                    "orgAddrCityDesc",
                    "entInfoSyss_0_deployAddrProvince",
                    "entInfoSyss_2_deployMode",
                    "entInfoSyss_2_deployAddrCounty",
                    "orgName",
                    "entInfoSyss_3_entApplyId",
                    "entInfoSyss_3_deployMode",
                    "orgNature",
                    "orgAddr",
                    "updateDate",
                    "imgId_b",
                    "contactCrtNo",
                    "entInfoSyss_1_id",
                    "applyId",
                    "entInfoSyss_0_id",
                    "orgAddrProvince",
                    "imgId",
                    "contactCrtType",
                    "orgCrtType",
                    "entInfoSyss_1_deployAddrCity",
                    "orgCrtImgRid",
                    "orgAddrCountyDesc",
                    "createDate",
                    "orgNatureDesc",
                    "entInfoSyss_3_sysType",
                    "entInfoSyss_0_sysType",
                    "orgAddrCounty",
                    "entInfoSyss_1_deployAddrCounty",
                    "entInfoSyss_2_deployAddrProvince",
                    "entUserId",
                    "entInfoSyss_0_deployAddrCounty",
                    "legalEmail",
                    "entInfoSyss_3_id",
                    "industryCategory",
                    "entInfoSyss_1_deployAddr",
                    "entInfoSyss_0_deployAddrCity",
                    "prefix",
                    "entInfoSyss_2_id",
                ]
            )
        ),
        Step(RunTestCase("企业注册最终第三步提交信息").call(SubmitFinal)),
        Step(RunTestCase("登录-管理员").call(LoginAdmin).export(*["adminSession"])),
        Step(RunTestCase("校验注册信息").call(EntAuditPagequeryOrgnameNoaudit)),
    ]


if __name__ == "__main__":
    TestCaseApplyAgain().test_start()
